# Lottery Transparency Log Configuration
# Generated by Ansible for {{ inventory_hostname }}

log_directory: "{{ lottery_data_dir }}"
log_level: "{{ lottery_log_level }}"

# Storage backend: "file" or "oracle"
storage_backend: "{{ storage_backend }}"

# Server configuration
server:
  host: "0.0.0.0"
  port: {{ lottery_port }}
  
  # Authentication method: mTLS for inter-server communication
  auth_method: "mtls"
  
  tls:
    cert_file: "{{ lottery_install_dir }}/certs/server-cert.pem"
    key_file: "{{ lottery_install_dir }}/certs/server-key.pem"
    ca_file: "{{ lottery_install_dir }}/certs/ca-cert.pem"

# Witness configuration
witness:
  # List of peer witnesses for cross-checking
  peers_file: "{{ lottery_install_dir }}/peers.json"
  
  # Observation interval
  observe_interval: "5m"
  
  # Enable automatic observation
  auto_observe: true
  
  # Enable gossip protocol for cross-verification
  enable_gossip: true
  
  # Gossip interval
  gossip_interval: "10m"

# Server role
{% if is_primary | default(false) %}
# This is the PRIMARY server - accepts lottery draw submissions
role: "primary"
{% else %}
# This is a WITNESS server - observes and verifies draws
role: "witness"
{% endif %}
